<div class="col-lg-12">
  <p>{{ vm.dayRange }}</p>
  <div>
    日程を変更する<input date-range-picker id="dayRange" type="text" name="dayRange" ng-model="vm.planDates" options="vm.dateOptions"/>
  </div>

  <button class="btn btn-primary" ng-click="vm.save()">Save</button>
</div>
<div class="col-lg-3 col-md-3">
  <h2>{{ vm.plan.title }}</h2>

  <div ng-repeat="day in vm.plan.dailyPlans track by $index" ng-class="{active: $index==vm.currentDay}" ng-click="vm.setCurrentDay($index)">
    <span>{{ $index + 1 }}日目</span>
  </div>
  <ul>
    <li ng-repeat="planItem in vm.plan.dailyPlans[vm.currentDay].planItems" style="list-style: none">
      <h3>{{ planItem.spot.name }}
        <button class="btn btn-danger" ng-click="vm.delPlanItem($index)"><%= t("client.plan__delete_plan_item") %></button>
      </h3>
      <div class="col-md-12" ng-show="!$last">
        <div class="route">
          <div ng-hide="planItem.route.isLoaded" class="directionSpinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
          </div>
          <span ng-show="planItem.route.isLoaded">
            <span ng-show="!planItem.route.hasDirection" class="noRoute">
              <a href="https://www.compathy.net/information/web/ja/planning/plan.html#noDirection" target="_blank"
                analytics-on="click" analytics-category="CreatePlan" analytics-event="Other" analytics-label="noDirectionButton">
                <span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span></a>&nbsp;
          </span>
          <span ng-show="planItem.route.hasDirection">
            <span ng-switch="planItem.route.travelMode">
              <span ng-switch-when="TRANSIT">
                <img src="//maps.gstatic.com/mapfiles/transit/iw2/6/rail.png" alt="TRANSIT" style="height:16px;vertical-align:middle;">
              </span>
              <span ng-switch-when="DRIVING">
                <img src="//maps.gstatic.com/mapfiles/transit/iw2/6/drive.png" alt="DRIVING" style="height:16px;vertical-align:middle;">
              </span>
              <span ng-switch-when="WALKING">
                <img src="//maps.gstatic.com/mapfiles/transit/iw2/6/walk.png" alt="WALKING" style="height:16px;vertical-align:middle;">
              </span>
              <b>({{planItem.route.duration}} <span>{{planItem.route.durationUnit}}</span>)</b> {{
              planItem.route.distance}} <span>{{planItem.route.distanceUnit}}</span>
            </span>
          </span>
          </span>
        </div>
      </div>
    </li>
  </ul>
</div>
<div class="col-lg-3 col-md-3">
  <h2>Spot Search</h2>
  <selectize placeholder="国を選んでください"
  config="vm.selects.country.config" options="vm.selects.country.options" ng-model="vm.selects.country.model"
  ></selectize>

  <selectize placeholder="エリアを選んでください"
    config="vm.selects.state.config" options="vm.selects.state.options" ng-model="vm.selects.state.model"
  ></selectize>
  <ul>
    <li ng-repeat="sp in vm.spots">
      <p>{{ sp.name }}</p>
      <p>{{ sp.lat }}</p>
      <p>{{ sp.lng }}</p>
      <button ng-click="vm.addPlanItem(sp)">プランに追加</button>
    </li>
  </ul>
</div>
<div class="col-lg-6 col-md-6">
  <p>sw: {{ vm.map.bounds.southwest }}</p>
  <p>ne: {{ vm.map.bounds.northeast }}</p>
  <div class="map">
    <ui-gmap-google-map
      center="vm.map.center"
      zoom="vm.map.zoom"
      options="vm.mapOptions"
      control="vm.map.control"
      bounds="vm.map.bounds"
      pan="true">
      <ui-gmap-map-control
        template='/templates/subapp/plans/searchBox'
        position="LEFT_TOP"
        controller="PlansMapSearchBoxController" index="-1">
      </ui-gmap-map-control>
      <ui-gmap-markers
        models="vm.spotMarkers"
        coords="'self'"
        icon="'icon'"
        click="onClick"
        options="options"
        >
        <ui-gmap-windows
          show="show"
          templateUrl="'infoWindowTemplate'"
          options="'infoWindowOptions'"
          closeClick="'closeClick'"
          >
        </ui-gmap-windows>
      </ui-gmap-markers>
      <ui-gmap-markers
        models="vm.planMarkers"
        coords="'self'"
        icon="'icon'"
        click="onClick"
        options="options"
        >
        <ui-gmap-windows
          show="show"
          templateUrl="'infoWindowTemplate'"
          options="'infoWindowOptions'"
          closeClick="'closeClick'"
          >
        </ui-gmap-windows>
      </ui-gmap-markers>
    </ui-gmap-google-map>
  </div>
</div>